# Example environment configuration (copy to .env and edit)

# Backend secrets
SECRET_KEY=change-me
# bcrypt hash for 'admin' by default: generate your own
ADMIN_PASSWORD_HASH=$2b$12$YCaF33BlK0B7IFPaPzjYuuUm9FisV2lvuP6mGbeovT5rsn36kO4.e

# Database configuration (choose one)
# Full async URL for Postgres (recommended in prod)
# DB_URL=postgresql+asyncpg://user:pass@host:5432/dbname
# Or leave DB_URL empty to use local SQLite file via DB_PATH
DB_URL=
DB_PATH=./data/pharmacy_prices.sqlite

# Fernet key for encrypting alerts (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
ALERTS_FERNET_KEY=

# SMTP (optional)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
FROM_EMAIL=
SENDGRID_API_KEY=
SENDGRID_FROM=noreply@example.com

# Twilio WhatsApp (optional)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_WHATSAPP_FROM=

# Confirmation URL base used in emails (backend will append /confirm?token=...)
CONFIRMATION_BASE_URL=http://localhost:61973

# CORS/frontend
# Include both localhost and 127.0.0.1 variants to avoid preflight issues
ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173,http://localhost:3000,http://127.0.0.1:3000,http://localhost:61973,http://127.0.0.1:61973
# Regex to allow all localhost variants and ports (dev only)
ALLOW_ORIGIN_REGEX=^https?://(localhost|127\.0\.0\.1)(:\\d+)?$

# Mock API (optional)
# Set to true to expose mock endpoints under /api/mock/*
ENABLE_MOCK_API=false

# Postgres over SSH tunnel (optional)
# Enable to connect DB_URL through a secure SSH tunnel.
# When enabled, manage.sh will:
#  - create a local forward 127.0.0.1:LOCAL_TUNNEL_PORT to REMOTE_DB_HOST:REMOTE_DB_PORT via SSH_TUNNEL_HOST
#  - rewrite DB_URL host:port to 127.0.0.1:LOCAL_TUNNEL_PORT for the backend process
USE_SSH_TUNNEL=true
SSH_TUNNEL_HOST=your-ssh-host.mydevil.net
SSH_TUNNEL_USER=your_ssh_user
SSH_TUNNEL_PORT=22
REMOTE_DB_HOST=pgsql0.mydevil.net
REMOTE_DB_PORT=5432
LOCAL_TUNNEL_PORT=55432

# Alerts price window (PLN)
ALERTS_MIN_PRICE=10
ALERTS_MAX_PRICE=35

# Pooling (used for non-SQLite)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# Frontend
# VITE_API_URL=http://localhost:61973
